<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz zur NS-Zeit</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen p-6">
    <div id="app"></div>

    <script>
        // Basisfragen unverändert (Quelle: angepasste Lehrinhalte)
        const baseQuestions = [
            { question: "In welchem KZ sind besonders berüchtigte Menschenversuche zur Unterkühlung (Hypothermie) dokumentiert?", options: ["Dachau", "Auschwitz-Birkenau", "Ravensbrück", "Buchenwald"], correct: 0, hint: "Diese Versuche wurden im Zusammenhang mit Luftfahrtforschung und medizinischen Tests durchgeführt.", info: "Dachau: dokumentierte Unterkühlungs- und Druckkammer‑Versuche an Häftlingen." },
            { question: "In welchem Lager führte Josef Mengele besonders grausame Experimente an Zwillingen durch?", options: ["Auschwitz-Birkenau", "Dachau", "Buchenwald", "Ravensbrück"], correct: 0, hint: "Der Arzt wurde als 'Todesengel' bekannt.", info: "Josef Mengele praktizierte in Auschwitz und führte insbesondere an Zwillingen, Kindern und anderen Häftlingen brutale Experimente durch." },
            { question: "Welches der genannten Lager war hauptsächlich ein Konzentrationslager für Frauen, in dem u. a. medizinische Versuche an Frauen stattfanden?", options: ["Ravensbrück", "Dachau", "Buchenwald", "Auschwitz-Birkenau"], correct: 0, hint: "Es lag nördlich von Berlin und war primär für weibliche Häftlinge vorgesehen.", info: "Ravensbrück war das größte Frauenkonzentrationslager; dort sind zahlreiche Misshandlungen und Versuche dokumentiert." },
            { question: "Welches Lager war zugleich größter Vernichtungsort mit systematischen Gaskammern und massenhaften Deportationen?", options: ["Auschwitz-Birkenau", "Buchenwald", "Dachau", "Ravensbrück"], correct: 0, hint: "Dieses Lagerkomplex wurde zum Synonym für die industrielle Vernichtung.", info: "Auschwitz‑Birkenau war das größte Vernichtungslager; die Opferzahlen liegen in der Größenordnung von ca. 1,0–1,3 Mio." },
            { question: "In welchem der genannten Lager sind dokumentierte Versuche mit Sulfonamiden (Wundbrand/Infektionsversuche) an Häftlingen (insbesondere Frauen) bekannt?", options: ["Ravensbrück", "Buchenwald", "Dachau", "Auschwitz-Birkenau"], correct: 0, hint: "Antibiotika‑und Wundinfektionsversuche wurden dort durchgeführt.", info: "In Ravensbrück wurden Versuche mit Sulfonamiden und Infektionen an Häftlingsfrauen dokumentiert." },
            { question: "Welche Art von Versuch ist mit dem KZ Dachau historisch besonders verbunden?", options: ["Unterkühlungs- und Hochgebirgs-/Druckkammer‑Versuche", "Gasexperimentreihen an Zivilbevölkerung", "Sprengstofftests an Häftlingen", "Radioaktive Strahlenversuche"], correct: 0, hint: "Tests betrafen vor allem Parameter der menschlichen Überlebensfähigkeit unter extremen Bedingungen.", info: "In Dachau gab es u. a. Unterkühlungs‑sowie Druckkammer‑Experimente (auch im Kontext der Luftwaffenforschung)." },
            { question: "In welchem Lager wurden Häftlinge zu Zwangsarbeit in Rüstungsbetrieben herangezogen, wobei medizinische 'Experimente' und tödliche Bedingungen kombiniert wurden?", options: ["Buchenwald", "Auschwitz-Birkenau", "Ravensbrück", "Dachau"], correct: 0, hint: "Das Lager lag in Thüringen und war eng mit der Rüstungsindustrie verbunden.", info: "Buchenwald war ein großes KZ in Deutschland mit umfangreicher Zwangsarbeit; auch Misshandlungen und medizinische Verbrechen sind dokumentiert." },
            { question: "Ungefähr wie viele Menschen werden weltweit als Tote des Zweiten Weltkriegs (inkl. militärisch & zivil) geschätzt? (Schätzfrage)", options: ["~70 Millionen (rund)", "~30 Millionen", "~100 Millionen", "~10 Millionen"], correct: 0, hint: "Die Bandbreite liegt in den hohen zehn‑ bis niedrigen zweistelligen Millionen.", info: "Gängige Schätzungen für die Gesamtopfer des Zweiten Weltkriegs liegen bei etwa 65–75 Millionen. (Akzeptiert: 65–75M)" },
            { question: "Etwa wie viele Menschen wurden im Vernichtungs‑und Vernichtungsmaßstab im Lager Auschwitz‑Birkenau getötet? (Schätzfrage — grobe Größenordnung)", options: ["~1.100.000", "~10.000", "~300.000", "~3.000.000"], correct: 0, hint: "Die übliche, oft zitierte Größenordnung liegt um eine Million.", info: "Häufig genannte Schätzung für Auschwitz‑Birkenau liegt bei etwa 1,0–1,3 Millionen Opfern (mehrheitlich jüdische Menschen). (Akzeptiert: 1.0–1.3M)" },
            { question: "In welchem Lager sind systematische Sterilisations‑und 'Euthanasie'‑bezogene Verbrechen (u. a. Zwangssterilisierung, Sterilisationsexperimente) dokumentiert?", options: ["Ravensbrück und Auschwitz-Birkenau", "Nur Dachau", "Nur Buchenwald", "Keines der genannten"], correct: 0, hint: "Mehrere Orte meldeten solche Verbrechen, besonders gegen Frauen.", info: "Sterilisations‑und euthanasiebezogene Verbrechen sind u. a. in Ravensbrück und in Teilen des Auschwitzkomplexes dokumentiert; Ravensbrück war ein Zentrum für Frauenversuche." },
            { question: "Welches Land erlitt während des Zweiten Weltkriegs die höchsten absoluten Verluste (ungefähr, alle Todesarten)?", options: ["Sowjetunion", "Polen", "Deutschland", "Frankreich"], correct: 0, hint: "Das Land verlor Millionen an Soldaten und Zivilisten; die Zahlen sind am höchsten in absoluten Werten.", info: "Die Sowjetunion erlitt die höchsten absoluten Verluste, Schätzzahlen liegen oft zwischen ca. 20–27 Millionen Toten." },
            { question: "Welches Land verlor prozentual (bezogen auf die VOR‑Krieg‑Bevölkerung) am meisten durch Tod und Vertreibung im Zweiten Weltkrieg?", options: ["Polen", "Vereinigtes Königreich", "USA", "Schweden"], correct: 0, hint: "Dieses Land verlor einen sehr hohen Anteil seiner Bevölkerung.", info: "Polen erlitt prozentual extrem hohe Verluste an Zivilbevölkerung und Kriegstoten; relative Verluste zählen zu den höchsten." },
            { question: "In welchem Lager gab es dokumentierte medizinische Versuche, die mit Giftstoffen bzw. Vergiftungsversuchen (z. B. Giftgas‑Tests an Häftlingen) zusammenhängen?", options: ["Buchenwald (und in Teilen auch andere Lager)", "Nur Dachau", "Nur Ravensbrück", "Keines der Lager"], correct: 0, hint: "Einige Lager dokumentieren Gift‑oder Vergiftungstests in unterschiedlicher Form.", info: "In Buchenwald und anderen Lagern sind verschiedenartige Vergiftungs‑oder toxikologische Versuche bzw. Vergiftungsfälle dokumentiert." },
            { question: "Wie viele Juden wurden im Holocaust (ungefähre, häufig zitierte Schätzung) ermordet? (Schätzfrage)", options: ["~6.000.000", "~100.000", "~20.000.000", "~500.000"], correct: 0, hint: "Die oft zitierte Zahl liegt bei mehreren Millionen.", info: "Die häufig zitierte Schätzung für jüdische Opfer des Holocaust liegt bei rund 6 Millionen. (Akzeptiert: 5.5–6.5M)" },
            { question: "Ungefähr wie viel Prozent der Weltbevölkerung (ca. 1940) entsprechen 70 Millionen Todesopfern?", options: ["~3%", "~0.3%", "~10%", "~20%"], correct: 0, hint: "Rechne grob: 70M geteilt durch ca. 2,3 Milliarden.", info: "70 Millionen von etwa 2,3 Milliarden entsprechen grob 3% der damaligen Weltbevölkerung." },
            { question: "In welchem Lager waren zahlreiche Häftlinge Opfer von Menschenversuchen, die von Ärzten im Zusammenhang mit Wundbehandlung und Infektionstests durchgeführt wurden (u. a. absichtliche Infektionen)?", options: ["Buchenwald und Ravensbrück", "Nur Dachau", "Nur Auschwitz-Birkenau", "Keines der Lager"], correct: 0, hint: "Mehrere Lager führten solche Experimente durch, besonders an verwundeten Häftlingen.", info: "In Buchenwald und Ravensbrück sind absichtliche Infektions‑und Wundversuche dokumentiert." },
            { question: "Welche Gruppe war gezielt Opfer der nationalsozialistischen 'Rassenpolitik' und erlitt systematischen Mord (Kerngruppe des Holocaust)?", options: ["Jüdische Menschen", "Rom (Sinti und Roma) ausschließlich", "Politische Gefangene ausschließlich", "Alleine Kriegsgefangene"], correct: 0, hint: "Diese Gruppe war zentral Ziel des Holocaust.", info: "Jüdische Menschen waren die zentrale Zielgruppe des Holocaust; zudem wurden auch andere Gruppen verfolgt und ermordet." },
            { question: "Welche Aussage zu Josef Mengele ist korrekt?", options: ["Er arbeitete vor allem in Auschwitz und experimentierte unter anderem an Zwillingen.", "Er leitete die Experimente in Dachau, aber nie in Auschwitz.", "Er war ein SS-Anwalt und führte keine medizinischen Experimente durch.", "Er war Lagerkommandant von Buchenwald."], correct: 0, hint: "Bekannt geworden durch Experimente an Kindern und Zwillingen.", info: "Josef Mengele war SS‑Arzt in Auschwitz und für grausame Menschenversuche berüchtigt." },
            { question: "Welches Lager war eines der ersten, das die Nazis 1933 einrichteten und das später als Modell für andere Lager diente?", options: ["Dachau", "Auschwitz-Birkenau", "Ravensbrück", "Buchenwald"], correct: 0, hint: "Es wurde kurz nach Hitlers Ernennung eröffnet.", info: "Dachau wurde 1933 eröffnet und war eines der ersten großen Konzentrationslager des NS‑Regimes." },
            { question: "Schätzfrage: Wie viele Menschen starben insgesamt in den KZs, Ghettos und Vernichtungslagern des NS‑Regimes (inkl. Holocaust‑Opfer und weitere Gruppen) — grobe, häufig zitierte Gesamtordnung?", options: ["~11 Millionen", "~1 Million", "~70 Millionen", "~100.000"], correct: 0, hint: "Diese Zahl bezieht sich auf Opfer des NS‑Regimes (exkl. Gesamttoten des WW2).", info: "Häufig wird für Opferkreise des NS‑Regimes eine Größenordnung um 10–12 Millionen genannt (Juden, Verfolgte, Behinderte, Roma u. a.). (Akzeptiert: 10–12M)" },
            { question: "In welchem Jahr wurde das KZ Dachau offiziell eröffnet? (Zeitleisten‑Aufgabe — gib das Jahr an; Akzeptanz ±2 Jahre)", options: [], correct: null, type: 'year', answer: 1933, hint: "Dachau wurde kurz nach Hitlers Ernennung eröffnet.", info: "Dachau wurde im März 1933 eröffnet. (Akzeptanzbereich: 1931–1935)" },
            { question: "In welchem Jahr wurde Auschwitz‑Birkenau (als größtes Vernichtungslager, Beginn der Massenvernichtung in dem Komplex) befreit? (Zeitleisten‑Aufgabe — gib das Jahr an; Akzeptanz ±2 Jahre)", options: [], correct: null, type: 'year', answer: 1945, hint: "Die Befreiung erfolgte gegen Ende des Krieges, im Januar eines Jahres.", info: "Auschwitz wurde am 27. Januar 1945 befreit. (Akzeptanzbereich: 1943–1947)" },
            { question: "Welche Aussage trifft auf Buchenwald zu?", options: ["Buchenwald war ein großes Konzentrationslager mit Zwangsarbeit; es gab dort auch medizinische Misshandlungen und eine hohe Todesrate.", "Buchenwald war ausschließlich eine Endlagerungsstelle mit Gaskammern wie Auschwitz.", "Buchenwald war ein reines Internierungslager ohne medizinische Versuche.", "Buchenwald lag in Polen."], correct: 0, hint: "Es lag in Thüringen, Deutschland und diente als Arbeitslager.", info: "Buchenwald war ein großes deutsches KZ (bei Weimar) mit Zwangsarbeit; es war kein reines Vernichtungslager wie Auschwitz." },
            { question: "Welche der folgenden Opfergruppen wurde neben jüdischen Menschen systematisch verfolgt und ermordet?", options: ["Sinti und Roma", "Australische Zivilisten", "Neutrale Staatsangehörige generell", "Alle Menschen über 90 Jahre"], correct: 0, hint: "Diese Minderheit war Ziel der 'Zigeunerpolitik' der Nazis.", info: "Sinti und Roma wurden systematisch verfolgt und in vielen Fällen ermordet." },
            { question: "Schätzfrage: Ungefähr wie viele Menschen verloren in Polen ihr Leben (militärisch & zivil) infolge deutscher Besatzung und Krieg bis 1945?", options: ["~5–6 Millionen", "~500.000", "~20 Millionen", "~50.000"], correct: 0, hint: "Polen erlitt sehr hohe absolute und relative Verluste.", info: "Gängige Schätzungen für Polens Gesamtverluste liegen bei ca. 4,5–6,5 Millionen Menschen. (Akzeptiert: 4.5–6.5M)" }
        ];

        // Hilfsfunktion: Fisher-Yates Shuffle
        function shuffleArray(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        // Erzeuge runtime questions; mische nur bei normalen MCQ-Fragen, bewahre 'year'-Fragen unverändert
        const questions = baseQuestions.map(q => {
            if (q.type === 'year') {
                return {
                    question: q.question,
                    type: 'year',
                    answer: q.answer, // numerische Jahresantwort
                    hint: q.hint,
                    info: q.info
                };
            }

            const opts = q.options.map((o, idx) => ({ text: o, originalIndex: idx }));
            const shuffled = shuffleArray(opts.slice());
            const newCorrect = shuffled.findIndex(s => s.originalIndex === q.correct);
            return {
                question: q.question,
                type: 'mcq',
                options: shuffled.map(s => s.text),
                correct: newCorrect,
                hint: q.hint,
                info: q.info
            };
        });

        // Zustand
        let currentQuestion = 0;
        let selectedAnswer = null;
        let score = 0;
        let showHint = false;
        let showInfo = false;
        let answeredQuestions = [];
        let showResult = false;

        // Render- und Interaktionsfunktionen (unverändert, nur leicht bereinigt)
        function render() {
            const app = document.getElementById('app');
            
            if (showResult) {
                const percentage = (score / questions.length * 100).toFixed(0);
                app.innerHTML = `
                    <div class="max-w-3xl mx-auto">
                        <div class="bg-gray-800 rounded-lg p-8 shadow-xl">
                            <h2 class="text-3xl font-bold mb-6 text-center">Quiz beendet!</h2>
                            <div class="text-center mb-8">
                                <div class="text-6xl font-bold mb-4">${percentage}%</div>
                                <p class="text-xl mb-2">${score} von ${questions.length} Fragen richtig beantwortet</p>
                                ${percentage >= 80 ? '<p class="text-green-400 text-lg">Ausgezeichnet!</p>' : ''}
                                ${percentage >= 60 && percentage < 80 ? '<p class="text-yellow-400 text-lg">Gut gemacht!</p>' : ''}
                                ${percentage < 60 ? '<p class="text-orange-400 text-lg">Weiter üben!</p>' : ''}
                            </div>
                            
                            <div class="mb-6">
                                <h3 class="text-xl font-semibold mb-4">Deine Antworten:</h3>
                                <div class="space-y-2">
                                    ${answeredQuestions.map((answer, idx) => `
                                        <div class="flex items-center gap-2">
                                            <span class="${answer.correct ? 'text-green-500' : 'text-red-500'}">
                                                ${answer.correct ? '✓' : '✗'}
                                            </span>
                                            <span class="text-sm">Frage ${idx + 1}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <button onclick="restartQuiz()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                                Quiz neu starten
                            </button>
                        </div>
                    </div>
                `;
                return;
            }

            const currentQ = questions[currentQuestion];
            
            app.innerHTML = `
                <div class="max-w-3xl mx-auto">
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm text-gray-400">Frage ${currentQuestion + 1} von ${questions.length}</span>
                            <span class="text-sm text-gray-400">Score: ${score}/${currentQuestion + (selectedAnswer !== null ? 1 : 0)}</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: ${((currentQuestion + 1) / questions.length) * 100}%"></div>
                        </div>
                    </div>

                    <div class="bg-gray-800 rounded-lg p-8 shadow-xl">
                        <h2 class="text-2xl font-bold mb-6">${currentQ.question}</h2>

                        <div class="space-y-3 mb-6">
                            ${currentQ.type === 'year' ? `
                                <div class="flex flex-col items-center gap-3">
                                    <div class="flex items-center gap-4">
                                        <input id="yearSlider" type="range" min="${currentQ.answer - 20}" max="${currentQ.answer + 20}" value="${currentQ.answer}" class="w-64" oninput="document.getElementById('yearValue').innerText = this.value">
                                        <div class="w-24 text-center">Jahr: <span id="yearValue" class="font-semibold">${currentQ.answer}</span></div>
                                    </div>
                                    <button onclick="submitYear()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Antwort prüfen</button>
                                </div>
                                ${selectedAnswer !== null ? `<div class="text-center mt-2 ${answeredQuestions[answeredQuestions.length-1].correct ? 'text-green-400' : 'text-red-400'}">${answeredQuestions[answeredQuestions.length-1].correct ? 'Richtig' : `Falsch — korrekt wäre ${currentQ.answer}`}</div>` : ''}
                            ` : `
                                ${currentQ.options.map((option, index) => {
                                    let buttonClass = "w-full text-left p-4 rounded-lg border-2 transition-all cursor-pointer ";
                                    
                                    if (selectedAnswer === null) {
                                        buttonClass += "border-gray-600 hover:border-blue-500 hover:bg-gray-700";
                                    } else if (index === currentQ.correct) {
                                        buttonClass += "border-green-500 bg-green-900";
                                    } else if (index === selectedAnswer) {
                                        buttonClass += "border-red-500 bg-red-900";
                                    } else {
                                        buttonClass += "border-gray-600 opacity-50";
                                    }

                                    return `
                                        <div onclick="handleAnswer(${index})" class="${buttonClass}">
                                            <div class="flex items-center justify-between">
                                                <span>${option}</span>
                                                ${selectedAnswer !== null && index === currentQ.correct ? '<span class="text-green-400">✓</span>' : ''}
                                                ${selectedAnswer === index && index !== currentQ.correct ? '<span class="text-red-400">✗</span>' : ''}
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                            `}
                        </div>

                        <div class="space-y-3 mb-6">
                            <button onclick="toggleHint()" class="flex items-center gap-2 text-yellow-400 hover:text-yellow-300 transition-colors">
                                <span>❓</span>
                                <span>${showHint ? 'Hinweis ausblenden' : 'Hinweis anzeigen'}</span>
                            </button>
                            
                            ${showHint ? `
                                <div class="bg-yellow-900 border-l-4 border-yellow-400 p-4 rounded">
                                    <p class="text-sm">${currentQ.hint}</p>
                                </div>
                            ` : ''}

                            <button onclick="toggleInfo()" class="flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors">
                                <span>ℹ️</span>
                                <span>${showInfo ? 'Info ausblenden' : 'Hintergrundinfo anzeigen'}</span>
                            </button>
                            
                            ${showInfo ? `
                                <div class="bg-blue-900 border-l-4 border-blue-400 p-4 rounded">
                                    <p class="text-sm">${currentQ.info}</p>
                                </div>
                            ` : ''}
                        </div>

                        ${selectedAnswer !== null ? `
                            <button onclick="nextQuestion()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                                ${currentQuestion < questions.length - 1 ? 'Nächste Frage' : 'Ergebnis anzeigen'}
                            </button>
                        ` : ''}
                    </div>

                    <div class="mt-6 text-center text-sm text-gray-400">
                        <p>Dieses Quiz dient der historischen Bildung über die NS-Zeit.</p>
                    </div>
                </div>
            `;
        }

        function handleAnswer(index) {
            const currentQ = questions[currentQuestion];
            if (currentQ.type === 'year') return; // year questions handled via submitYear()
            if (selectedAnswer !== null) return;
            
            selectedAnswer = index;
            if (index === currentQ.correct) {
                score++;
            }
            
            answeredQuestions.push({
                question: currentQuestion,
                correct: index === currentQ.correct
            });
            
            render();
        }

        function submitYear() {
            const slider = document.getElementById('yearSlider');
            if (!slider) return;
            const val = parseInt(slider.value, 10);
            if (isNaN(val)) return;

            const currentQ = questions[currentQuestion];
            if (currentQ.type !== 'year') return;

            // Akzeptanz ±2 Jahre
            const correct = Math.abs(val - currentQ.answer) <= 2;
            selectedAnswer = val; // store the numeric input to show feedback
            if (correct) score++;
            answeredQuestions.push({ question: currentQuestion, correct });
            render();
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                selectedAnswer = null;
                showHint = false;
                showInfo = false;
                render();
            } else {
                showResult = true;
                render();
            }
        }

        function toggleHint() {
            showHint = !showHint;
            render();
        }

        function toggleInfo() {
            showInfo = !showInfo;
            render();
        }

        function restartQuiz() {
            currentQuestion = 0;
            selectedAnswer = null;
            showResult = false;
            score = 0;
            showHint = false;
            showInfo = false;
            answeredQuestions = [];
            render();
        }

        // Initial render
        render();
    </script>
